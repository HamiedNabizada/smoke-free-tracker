<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="Verfolge deinen Fortschritt beim Rauchstopp mit detaillierten Statistiken und Gesundheitsmeilensteinen">
    <meta name="theme-color" content="#667eea">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' https://cdn.jsdelivr.net https://www.gstatic.com https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline'; connect-src 'self' https://*.firebaseapp.com https://*.googleapis.com https://*.firestore.googleapis.com https://firestore.googleapis.com https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://www.gstatic.com; img-src 'self' data: https:; font-src 'self' data:; frame-src 'none'; object-src 'none'; base-uri 'self'; form-action 'self'">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon.png">

    <!-- iOS & Mobile Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ByeByeSmoke">
    <link rel="apple-touch-icon" href="icon.png">

    <title>ByeByeSmoke</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Skip Links for keyboard navigation -->
    <a href="#dashboard" class="skip-link" data-i18n="accessibility.skipToContent">Zum Hauptinhalt springen</a>
    <a href="#tab-navigation" class="skip-link" data-i18n="accessibility.skipToNav">Zur Navigation springen</a>

    <div class="container" role="application" aria-label="ByeByeSmoke Rauchstopp-Tracker">
        <header>
            <div class="header-logo">
                <img src="logo_small.png" alt="ByeByeSmoke Logo" class="logo-image" width="400" height="150">
            </div>
            <div class="header-buttons">
                <button id="languageToggle" class="language-toggle" data-i18n-aria="header.language" aria-label="Sprache wechseln">ğŸ‡©ğŸ‡ª</button>
                <button id="darkModeToggle" class="dark-mode-toggle" data-i18n-aria="header.darkMode" aria-label="Dark Mode umschalten">ğŸŒ™</button>
                <button id="tutorialBtn" class="tutorial-btn" data-i18n-aria="header.tutorial" aria-label="Hilfe & Anleitung">â„¹ï¸</button>
                <button id="settingsBtn" class="settings-btn" data-i18n-aria="header.settings" aria-label="Einstellungen">âš™ï¸</button>
                <button id="logoutBtn" class="logout-btn" data-i18n-aria="header.logout" aria-label="Abmelden">ğŸšª</button>
            </div>
        </header>

        <!-- Tab Navigation -->
        <nav class="tab-navigation" id="tab-navigation" role="tablist" data-i18n-aria="nav.mainNavigation" aria-label="Hauptnavigation">
            <button class="tab-button active" data-tab="overview" role="tab" aria-selected="true" aria-controls="panel-overview" id="tab-overview">
                <span class="tab-icon" aria-hidden="true">ğŸ“Š</span>
                <span class="tab-label" data-i18n="nav.overview">Ãœbersicht</span>
            </button>
            <button class="tab-button" data-tab="milestones" role="tab" aria-selected="false" aria-controls="panel-milestones" id="tab-milestones">
                <span class="tab-icon" aria-hidden="true">ğŸ¥</span>
                <span class="tab-label" data-i18n="nav.milestones">Meilensteine</span>
            </button>
            <button class="tab-button" data-tab="achievements" role="tab" aria-selected="false" aria-controls="panel-achievements" id="tab-achievements">
                <span class="tab-icon" aria-hidden="true">ğŸ†</span>
                <span class="tab-label" data-i18n="nav.achievements">Erfolge</span>
            </button>
            <button class="tab-button" data-tab="statistics" role="tab" aria-selected="false" aria-controls="panel-statistics" id="tab-statistics">
                <span class="tab-icon" aria-hidden="true">ğŸ“ˆ</span>
                <span class="tab-label" data-i18n="nav.statistics">Statistiken</span>
            </button>
            <button class="tab-button" data-tab="help" role="tab" aria-selected="false" aria-controls="panel-help" id="tab-help">
                <span class="tab-icon" aria-hidden="true">ğŸ†˜</span>
                <span class="tab-label" data-i18n="nav.help">Hilfe</span>
            </button>
        </nav>

        <!-- Main Dashboard -->
        <main id="dashboard" class="dashboard" aria-live="polite">
            <!-- Tab Panel: Ãœbersicht -->
            <div class="tab-panel active" data-panel="overview" role="tabpanel" id="panel-overview" aria-labelledby="tab-overview" tabindex="0">
                <!-- Daily Motivation -->
                <div class="card motivation-card">
                    <div class="motivation-icon">ğŸ’ª</div>
                    <div id="dailyMotivation" class="motivation-text"></div>
                </div>

                <!-- Health Avatar -->
                <div class="card health-avatar-card">
                    <h2 data-i18n="dashboard.healthAvatar.title">ğŸ« Dein KÃ¶rper erholt sich</h2>
                    <p class="health-avatar-subtitle" data-i18n="dashboard.healthAvatar.subtitle">Sieh live, wie sich dein KÃ¶rper regeneriert!</p>

                    <div class="health-avatar-container">
                        <!-- Tooltip -->
                        <div class="health-tooltip hidden" id="healthTooltip"></div>

                        <!-- Left: Body Silhouette -->
                        <div class="body-silhouette">
                            <svg viewBox="0 0 200 400" xmlns="http://www.w3.org/2000/svg">
                                <!-- Body outline -->
                                <ellipse cx="100" cy="50" rx="35" ry="45" fill="#e0e0e0" opacity="0.3" />
                                <!-- Neck -->
                                <rect x="90" y="85" width="20" height="15" fill="#e0e0e0" opacity="0.3" />
                                <!-- Torso -->
                                <ellipse cx="100" cy="170" rx="60" ry="80" fill="#e0e0e0" opacity="0.3" />
                                <!-- Arms -->
                                <ellipse cx="50" cy="150" rx="15" ry="60" fill="#e0e0e0" opacity="0.3" />
                                <ellipse cx="150" cy="150" rx="15" ry="60" fill="#e0e0e0" opacity="0.3" />
                                <!-- Legs -->
                                <ellipse cx="80" cy="300" rx="18" ry="90" fill="#e0e0e0" opacity="0.3" />
                                <ellipse cx="120" cy="300" rx="18" ry="90" fill="#e0e0e0" opacity="0.3" />

                                <!-- Heart (animated) -->
                                <g id="heart" class="organ-heart">
                                    <path d="M100 140 L110 130 Q115 125 115 120 Q115 110 105 110 Q100 110 100 115 Q100 110 95 110 Q85 110 85 120 Q85 125 90 130 Z"
                                          fill="#ff6b6b" class="organ-fill" />
                                    <title>Herz</title>
                                </g>

                                <!-- Lungs (left and right) -->
                                <g id="lungs" class="organ-lungs">
                                    <!-- Left lung -->
                                    <ellipse cx="80" cy="140" rx="18" ry="35" fill="#95a5a6" class="organ-fill lung-left" />
                                    <!-- Right lung -->
                                    <ellipse cx="120" cy="140" rx="18" ry="35" fill="#95a5a6" class="organ-fill lung-right" />
                                    <title>Lungen</title>
                                </g>

                                <!-- Blood vessels (simplified) -->
                                <g id="blood-vessels" class="organ-blood">
                                    <line x1="100" y1="130" x2="80" y2="150" stroke="#e74c3c" stroke-width="3" class="vessel" opacity="0.6" />
                                    <line x1="100" y1="130" x2="120" y2="150" stroke="#e74c3c" stroke-width="3" class="vessel" opacity="0.6" />
                                    <line x1="100" y1="145" x2="100" y2="180" stroke="#e74c3c" stroke-width="3" class="vessel" opacity="0.6" />
                                    <title>BlutgefÃ¤ÃŸe</title>
                                </g>

                                <!-- Skin indicator (glow around body) -->
                                <ellipse id="skin-glow" cx="100" cy="170" rx="65" ry="85" fill="none"
                                         stroke="#f39c12" stroke-width="2" opacity="0.4" class="skin-glow" />
                            </svg>
                        </div>

                        <!-- Right: Stats -->
                        <div class="health-stats">
                            <div class="health-stat-item" data-organ="lungs">
                                <div class="health-stat-icon">ğŸ«</div>
                                <div class="health-stat-content">
                                    <div class="health-stat-label" data-i18n="dashboard.healthAvatar.lungs">Lungen</div>
                                    <div class="health-stat-bar">
                                        <div class="health-stat-fill" id="lungRegenBar"></div>
                                    </div>
                                    <div class="health-stat-value" id="lungRegenValue"></div>
                                </div>
                            </div>

                            <div class="health-stat-item" data-organ="heart">
                                <div class="health-stat-icon">â¤ï¸</div>
                                <div class="health-stat-content">
                                    <div class="health-stat-label" data-i18n="dashboard.healthAvatar.heart">Herz</div>
                                    <div class="health-stat-bar">
                                        <div class="health-stat-fill" id="heartRegenBar"></div>
                                    </div>
                                    <div class="health-stat-value" id="heartRegenValue"></div>
                                </div>
                            </div>

                            <div class="health-stat-item" data-organ="blood">
                                <div class="health-stat-icon">ğŸ©¸</div>
                                <div class="health-stat-content">
                                    <div class="health-stat-label" data-i18n="dashboard.healthAvatar.blood">Blutkreislauf</div>
                                    <div class="health-stat-bar">
                                        <div class="health-stat-fill" id="bloodRegenBar"></div>
                                    </div>
                                    <div class="health-stat-value" id="bloodRegenValue"></div>
                                </div>
                            </div>

                            <div class="health-stat-item" data-organ="skin">
                                <div class="health-stat-icon">âœ¨</div>
                                <div class="health-stat-content">
                                    <div class="health-stat-label" data-i18n="dashboard.healthAvatar.skin">Haut</div>
                                    <div class="health-stat-bar">
                                        <div class="health-stat-fill" id="skinRegenBar"></div>
                                    </div>
                                    <div class="health-stat-value" id="skinRegenValue"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Next Milestone Progress -->
                <div class="card">
                    <h2 data-i18n="dashboard.nextMilestone.title">NÃ¤chstes Ziel</h2>
                    <div id="nextMilestoneProgress"></div>
                </div>

                <!-- Progress Visualizations -->
                <div class="card progress-visuals-card">
                    <h2 data-i18n="dashboard.progress.title">Dein Fortschritt</h2>
                    <div class="gauges-container">
                        <!-- Days Gauge -->
                        <div class="gauge-item">
                            <div class="gauge">
                                <svg viewBox="0 0 200 120">
                                    <path class="gauge-bg" d="M 20 100 A 80 80 0 0 1 180 100" />
                                    <path class="gauge-fill days-gauge" id="daysGauge" d="M 20 100 A 80 80 0 0 1 180 100" />
                                </svg>
                                <div class="gauge-value">
                                    <span class="gauge-number" id="daysGaugeValue">0</span>
                                    <span class="gauge-percent" id="daysGaugePercent">0%</span>
                                </div>
                            </div>
                            <div class="gauge-label">
                                <span class="gauge-icon">ğŸ“…</span>
                                <span class="gauge-title" data-i18n="dashboard.progress.daysSmokeFree">Tage rauchfrei</span>
                            </div>
                            <div class="gauge-goal" id="daysGoalText"></div>
                        </div>

                        <!-- Money Gauge -->
                        <div class="gauge-item">
                            <div class="gauge">
                                <svg viewBox="0 0 200 120">
                                    <path class="gauge-bg" d="M 20 100 A 80 80 0 0 1 180 100" />
                                    <path class="gauge-fill money-gauge" id="moneyGauge" d="M 20 100 A 80 80 0 0 1 180 100" />
                                </svg>
                                <div class="gauge-value">
                                    <span class="gauge-number" id="moneyGaugeValue">0â‚¬</span>
                                    <span class="gauge-percent" id="moneyGaugePercent">0%</span>
                                </div>
                            </div>
                            <div class="gauge-label">
                                <span class="gauge-icon">ğŸ’°</span>
                                <span class="gauge-title" data-i18n="dashboard.progress.moneySaved">Geld gespart</span>
                            </div>
                            <div class="gauge-goal" id="moneyGoalText"></div>
                        </div>

                        <!-- Cigarettes Gauge -->
                        <div class="gauge-item">
                            <div class="gauge">
                                <svg viewBox="0 0 200 120">
                                    <path class="gauge-bg" d="M 20 100 A 80 80 0 0 1 180 100" />
                                    <path class="gauge-fill cigarettes-gauge" id="cigarettesGauge" d="M 20 100 A 80 80 0 0 1 180 100" />
                                </svg>
                                <div class="gauge-value">
                                    <span class="gauge-number" id="cigarettesGaugeValue">0</span>
                                    <span class="gauge-percent" id="cigarettesGaugePercent">0%</span>
                                </div>
                            </div>
                            <div class="gauge-label">
                                <span class="gauge-icon">ğŸš­</span>
                                <span class="gauge-title" data-i18n="dashboard.progress.cigarettesAvoided">Zigaretten vermieden</span>
                            </div>
                            <div class="gauge-goal" id="cigarettesGoalText"></div>
                        </div>
                    </div>
                </div>

                <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card primary">
                    <div class="stat-icon">ğŸ“…</div>
                    <div class="stat-value" id="daysSmokeFree">0</div>
                    <div class="stat-label" data-i18n="dashboard.stats.daysSmokeFree">Zeit rauchfrei</div>
                    <div class="stat-info" data-i18n="dashboard.stats.daysSmokeFreeInfo">Seit deinem Rauchstopp</div>
                </div>
                <div class="stat-card success">
                    <div class="stat-icon">ğŸ’°</div>
                    <div class="stat-value" id="moneySaved">0 â‚¬</div>
                    <div class="stat-label" data-i18n="dashboard.stats.moneySaved">Geld gespart</div>
                    <div class="stat-info" id="moneySavedInfo"></div>
                </div>
                <div class="stat-card info">
                    <div class="stat-icon">ğŸš¬</div>
                    <div class="stat-value" id="cigarettesNotSmoked">0</div>
                    <div class="stat-label" data-i18n="dashboard.stats.cigarettesNotSmoked">Nicht geraucht</div>
                    <div class="stat-info" id="cigarettesNotSmokedInfo"></div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-icon">â³</div>
                    <div class="stat-value" id="lifeGained">0</div>
                    <div class="stat-label" data-i18n="dashboard.stats.lifeGained">Lebenszeit gewonnen</div>
                    <div class="stat-info" data-i18n="dashboard.stats.lifeGainedInfo">17-22 Min pro Zigarette (Jackson 2025)</div>
                </div>
                <div class="stat-card danger">
                    <div class="stat-icon">â˜ ï¸</div>
                    <div class="stat-value" id="toxinsAvoided">0 g</div>
                    <div class="stat-label" data-i18n="dashboard.stats.toxinsAvoided">Schadstoffe vermieden</div>
                    <div class="stat-info" data-i18n="dashboard.stats.toxinsAvoidedInfo">Nikotin, Teer & Co.</div>
                </div>
                <div class="stat-card health">
                    <div class="stat-icon" id="lungIcon">ğŸ«</div>
                    <div class="stat-value" id="lungHealth">0%</div>
                    <div class="stat-label" data-i18n="dashboard.stats.lungHealth">Lungengesundheit</div>
                    <div class="stat-info" data-i18n="dashboard.stats.lungHealthInfo">Regeneration Ã¼ber 10 Jahre</div>
                </div>
                <div class="stat-card accent">
                    <div class="stat-icon">â±ï¸</div>
                    <div class="stat-value" id="timeSaved">0</div>
                    <div class="stat-label" data-i18n="dashboard.stats.timeSaved">Zeit gespart</div>
                    <div class="stat-info" data-i18n="dashboard.stats.timeSavedInfo">~5 Min. pro Zigarette (inkl. Vorbereitung)</div>
                </div>
                <div class="stat-card beauty">
                    <div class="stat-icon">âœ¨</div>
                    <div class="stat-value" id="skinImprovement">0%</div>
                    <div class="stat-label" data-i18n="dashboard.stats.skinImprovement">Hautverbesserung</div>
                    <div class="stat-info" data-i18n="dashboard.stats.skinImprovementInfo">Signifikante Verbesserung ab 6 Monaten (MailÃ¤nder Studie)</div>
                </div>
            </div>

                <!-- Environmental Impact -->
                <div class="card environmental-card">
                    <h2 data-i18n="dashboard.environment.title">ğŸŒ± Dein Beitrag fÃ¼r die Umwelt</h2>
                    <div class="environmental-stats">
                        <div class="environmental-item">
                            <div class="environmental-icon">ğŸ’§</div>
                            <div class="environmental-content">
                                <div class="environmental-value" id="waterSaved">0</div>
                                <div class="environmental-label" data-i18n="dashboard.environment.water">Liter Wasser gespart</div>
                                <div class="environmental-info" data-i18n="dashboard.environment.waterInfo">Zigarettenproduktion verbraucht ~3.7L pro Zigarette</div>
                            </div>
                        </div>
                        <div class="environmental-item">
                            <div class="environmental-icon">ğŸŒ³</div>
                            <div class="environmental-content">
                                <div class="environmental-value" id="treesSaved">0</div>
                                <div class="environmental-label" data-i18n="dashboard.environment.trees">BÃ¤ume geschÃ¼tzt</div>
                                <div class="environmental-info" data-i18n="dashboard.environment.treesInfo">Pro 300 Zigaretten wird ~1 Baum fÃ¼r Trocknung benÃ¶tigt</div>
                            </div>
                        </div>
                        <div class="environmental-item">
                            <div class="environmental-icon">ğŸŒ</div>
                            <div class="environmental-content">
                                <div class="environmental-value" id="co2Avoided">0 kg</div>
                                <div class="environmental-label" data-i18n="dashboard.environment.co2">COâ‚‚ vermieden</div>
                                <div class="environmental-info" data-i18n="dashboard.environment.co2Info">~14g COâ‚‚ pro Zigarette (Produktion + Transport)</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Streak Counter (hidden by default, shown if streak > 1) -->
                <div id="streakContainer" class="streak-container card" style="display: none;">
                    <div class="streak-content">
                        <span id="streakFire" class="streak-fire">ğŸ”¥</span>
                        <div class="streak-info">
                            <span class="streak-title" data-i18n="dashboard.streak.title">Du bist am Ball!</span>
                            <span class="streak-text" id="streakText">Du nutzt die App bereits <strong id="streakCount">0</strong> Tage in Folge. Weiter so!</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab Panel: Meilensteine -->
            <div class="tab-panel" data-panel="milestones" role="tabpanel" id="panel-milestones" aria-labelledby="tab-milestones" tabindex="0">
                <!-- What's Happening NOW -->
                <div class="card happening-now-card">
                    <h2 data-i18n="milestones.happeningNow.title">â° Was passiert gerade JETZT in deinem KÃ¶rper?</h2>
                    <div class="happening-now-content" id="happeningNowContent">
                        <div class="happening-icon" id="happeningIcon">ğŸ«</div>
                        <div class="happening-text">
                            <div class="happening-title" id="happeningTitle">Deine Regeneration lÃ¤uft...</div>
                            <div class="happening-description" id="happeningDescription">In diesem Moment arbeitet dein KÃ¶rper daran, sich zu erholen.</div>
                        </div>
                    </div>
                    <div class="happening-progress">
                        <div class="happening-bar" id="happeningBar"></div>
                    </div>
                    <div class="happening-next" id="happeningNext">NÃ¤chste Phase in X Stunden</div>
                </div>

                <div class="card">
                    <h2 data-i18n="milestones.healthMilestones.title">Gesundheits-Meilensteine</h2>
                    <div id="healthMilestones" class="milestones"></div>
                </div>
            </div>

            <!-- Tab Panel: Erfolge -->
            <div class="tab-panel" data-panel="achievements" role="tabpanel" id="panel-achievements" aria-labelledby="tab-achievements" tabindex="0">
                <div class="card">
                    <h2 data-i18n="achievements.title">Erfolge</h2>
                    <div id="achievements" class="achievements-grid"></div>
                </div>
            </div>

            <!-- Tab Panel: Statistiken -->
            <div class="tab-panel" data-panel="statistics" role="tabpanel" id="panel-statistics" aria-labelledby="tab-statistics" tabindex="0">
                <!-- Health Score with Lotus -->
                <div class="card health-score-card lotus-card">
                    <h2><span data-i18n="statistics.lotus.title">ğŸª· Deine Lotus</span> <span class="lotus-subtitle" data-i18n="statistics.lotus.subtitle">â€“ Gesundheitsscore</span></h2>
                    <div class="lotus-score-container">
                        <div class="lotus-visual">
                            <div id="lotusContainer" class="lotus-container"></div>
                            <div class="lotus-score-display">
                                <span id="lotusScore" class="lotus-score-value">0</span>
                                <span class="lotus-score-label" data-i18n="statistics.lotus.outOf">von 100</span>
                            </div>
                        </div>
                        <div class="lotus-info">
                            <div id="lotusStageName" class="lotus-stage-name">Samen (Stufe 1/5)</div>
                            <div id="lotusStageProgress" class="lotus-stage-progress">Deine Lotus beginnt zu keimen</div>
                            <div id="lotusNextStage" class="lotus-next-stage">Bei 20 Punkten erscheint der erste Spross</div>
                        </div>
                        <button id="lotusPreviewBtn" class="lotus-preview-btn">
                            <span class="preview-icon">â–¶</span> <span data-i18n="statistics.lotus.preview">Wachstum ansehen</span>
                        </button>
                        <div class="health-score-details" id="healthScoreDetails"></div>
                    </div>
                </div>

                <!-- Future Projection -->
                <div class="card projection-card">
                    <h2 data-i18n="statistics.projection.title">ğŸ”® Deine Zukunftsprognose</h2>
                    <div id="futureProjection" class="projection-content"></div>
                </div>

                <!-- Custom Goal Calculator -->
                <div class="card goal-calculator-card">
                    <h2 data-i18n="statistics.goalCalculator.title">ğŸ¯ Dein persÃ¶nliches Ziel</h2>
                    <p class="goal-calculator-intro" data-i18n="statistics.goalCalculator.intro">Berechne, wie lange es dauert oder was du erreichen wirst!</p>

                    <!-- Toggle Mode -->
                    <div class="goal-toggle">
                        <button class="goal-toggle-btn active" data-mode="days" data-i18n="statistics.goalCalculator.byDays">Nach Tagen</button>
                        <button class="goal-toggle-btn" data-mode="money" data-i18n="statistics.goalCalculator.byMoney">Nach Geld</button>
                    </div>

                    <!-- Input Section -->
                    <div class="goal-input-section">
                        <div class="goal-input-group" id="daysInputGroup">
                            <label for="goalDaysInput" data-i18n="statistics.goalCalculator.howManyDays">Wie viele Tage?</label>
                            <input type="number" id="goalDaysInput" data-i18n-placeholder="statistics.goalCalculator.daysPlaceholder" placeholder="z.B. 100" min="1" />
                        </div>
                        <div class="goal-input-group hidden" id="moneyInputGroup">
                            <label for="goalMoneyInput" data-i18n="statistics.goalCalculator.howMuchMoney">Wie viel Geld (â‚¬)?</label>
                            <input type="number" id="goalMoneyInput" data-i18n-placeholder="statistics.goalCalculator.moneyPlaceholder" placeholder="z.B. 2000" min="1" />
                        </div>
                        <button id="calculateGoalBtn" class="calculate-goal-btn" data-i18n="statistics.goalCalculator.calculate">Berechnen</button>
                    </div>

                    <!-- Results Section -->
                    <div class="goal-results hidden" id="goalResults">
                        <div class="goal-progress-bar">
                            <div class="goal-progress-fill" id="goalProgressFill"></div>
                            <div class="goal-progress-text" id="goalProgressText">0%</div>
                        </div>

                        <div class="goal-stats-grid" id="goalStatsGrid">
                            <!-- Will be filled by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Progress Chart -->
                <div class="card">
                    <h2 data-i18n="statistics.progressChart.title">Fortschritt</h2>
                    <canvas id="progressChart"></canvas>
                </div>

                <!-- Craving Chart -->
                <div class="card craving-chart-card">
                    <h2 data-i18n="statistics.cravingChart.title">ğŸ“Š Deine Ã¼berwundenen Verlangen</h2>
                    <p class="chart-subtitle" data-i18n="statistics.cravingChart.subtitle">Verlauf der letzten 30 Tage</p>
                    <canvas id="cravingChart"></canvas>
                    <div id="cravingSummary" class="craving-summary"></div>
                </div>

                <!-- Craving Heatmap -->
                <div class="card craving-heatmap-card">
                    <h2 data-i18n="statistics.heatmap.title">ğŸ”¥ Wann tritt Verlangen auf?</h2>
                    <p class="chart-subtitle" data-i18n="statistics.heatmap.subtitle">Muster der letzten 30 Tage nach Wochentag und Uhrzeit</p>
                    <div id="cravingHeatmap"></div>
                </div>

                <!-- Detailed Comparison -->
                <div class="card comparison-card">
                    <h2 data-i18n="statistics.comparison.title">ğŸ† Du bist stÃ¤rker als der Durchschnitt!</h2>
                    <div id="comparisonStats" class="comparison-content"></div>
                    <div id="detailedComparison" class="detailed-comparison"></div>
                </div>

                <!-- Age Group Comparison -->
                <div class="card age-comparison-card">
                    <h2 data-i18n="statistics.ageComparison.title">ğŸ‘¥ Vergleich mit deiner Altersgruppe</h2>
                    <div id="ageGroupComparison" class="age-comparison-content"></div>
                </div>

                <!-- Milestone Timeline -->
                <div class="card timeline-card">
                    <h2 data-i18n="statistics.timeline.title">ğŸ¯ Deine Meilenstein-Reise</h2>
                    <div id="milestoneTimeline" class="milestone-timeline"></div>
                </div>
            </div>

            <!-- Tab Panel: Hilfe -->
            <div class="tab-panel" data-panel="help" role="tabpanel" id="panel-help" aria-labelledby="tab-help" tabindex="0">
                <!-- Craving Button -->
                <div class="card craving-button-card">
                    <button id="cravingButton" class="craving-button" data-i18n="sos.button">
                        ğŸ†˜ Akutes Verlangen - Jetzt Hilfe!
                    </button>
                    <p class="craving-button-hint" data-i18n="sos.buttonHint">Klicke hier fÃ¼r sofortige UnterstÃ¼tzung mit einem 5-Minuten-Timer</p>
                </div>

                <!-- Compact Craving Stats -->
                <div class="card compact-craving-stats-card">
                    <h2 data-i18n="sos.cravingStats.title">ğŸ’ª Deine Erfolge gegen Verlangen</h2>
                    <div id="compactCravingStats" class="compact-craving-stats">
                        <p class="loading-message" data-i18n="common.loading">Lade Statistiken...</p>
                    </div>
                </div>

                <div class="card craving-tips-card">
                <h2 data-i18n="sos.tips.title">ğŸ’¡ Tipps gegen akutes Verlangen</h2>
                <div class="craving-tips">
                    <div class="tip">
                        <div class="tip-icon">â±ï¸</div>
                        <div class="tip-content">
                            <h3 data-i18n="sos.tips.fiveMinRule.title">5-Minuten-Regel</h3>
                            <p data-i18n="sos.tips.fiveMinRule.text">Warte 5 Minuten. Das Verlangen wird von selbst schwÃ¤cher!</p>
                        </div>
                    </div>
                    <div class="tip">
                        <div class="tip-icon">ğŸ’§</div>
                        <div class="tip-content">
                            <h3 data-i18n="sos.tips.water.title">Wasser trinken</h3>
                            <p data-i18n="sos.tips.water.text">Ein groÃŸes Glas Wasser trinken lenkt ab und hilft.</p>
                        </div>
                    </div>
                    <div class="tip">
                        <div class="tip-icon">ğŸš¶</div>
                        <div class="tip-content">
                            <h3 data-i18n="sos.tips.walk.title">Kurzer Spaziergang</h3>
                            <p data-i18n="sos.tips.walk.text">Bewege dich 5-10 Minuten. Frische Luft hilft!</p>
                        </div>
                    </div>
                    <div class="tip">
                        <div class="tip-icon">ğŸ«</div>
                        <div class="tip-content">
                            <h3 data-i18n="sos.tips.breathe.title">Tief durchatmen</h3>
                            <p data-i18n="sos.tips.breathe.text">10x tief ein- und ausatmen. Beruhigt sofort.</p>
                        </div>
                    </div>
                    <div class="tip">
                        <div class="tip-icon">ğŸ“±</div>
                        <div class="tip-content">
                            <h3 data-i18n="sos.tips.call.title">Jemanden anrufen</h3>
                            <p data-i18n="sos.tips.call.text">Ruf eine unterstÃ¼tzende Person an und rede.</p>
                        </div>
                    </div>
                    <div class="tip">
                        <div class="tip-icon">ğŸ</div>
                        <div class="tip-content">
                            <h3 data-i18n="sos.tips.snack.title">Gesunder Snack</h3>
                            <p data-i18n="sos.tips.snack.text">Obst, GemÃ¼se oder Kaugummi lenken den Mund ab.</p>
                        </div>
                    </div>
                </div>
                </div>

                <!-- Shocking Facts -->
                <div class="card shocking-facts-card">
                    <h2 data-i18n="sos.shockingFacts.title">âš ï¸ Warum du aufgehÃ¶rt hast</h2>
                    <p class="shocking-intro" data-i18n="sos.shockingFacts.intro">Diese Fakten erinnern dich daran, warum jede Zigarette ein Fehler wÃ¤re:</p>

                    <div class="shocking-facts-grid">
                        <!-- Fact 1 -->
                        <div class="shocking-fact">
                            <div class="shocking-icon">ğŸ’€</div>
                            <div class="shocking-content">
                                <div class="shocking-number" data-i18n="sos.shockingFacts.fact1.number">170.000</div>
                                <div class="shocking-label" data-i18n="sos.shockingFacts.fact1.label">Tote pro Jahr in Deutschland</div>
                                <div class="shocking-detail" data-i18n="sos.shockingFacts.fact1.detail">Jeder 7. Todesfall durch Rauchen</div>
                            </div>
                        </div>

                        <!-- Fact 2 -->
                        <div class="shocking-fact">
                            <div class="shocking-icon">ğŸŒ</div>
                            <div class="shocking-content">
                                <div class="shocking-number" data-i18n="sos.shockingFacts.fact2.number">8 Mio.</div>
                                <div class="shocking-label" data-i18n="sos.shockingFacts.fact2.label">Tote weltweit pro Jahr</div>
                                <div class="shocking-detail" data-i18n="sos.shockingFacts.fact2.detail">Mehr als Alkohol, AIDS & Drogen zusammen</div>
                            </div>
                        </div>

                        <!-- Fact 3 -->
                        <div class="shocking-fact">
                            <div class="shocking-icon">â³</div>
                            <div class="shocking-content">
                                <div class="shocking-number" data-i18n="sos.shockingFacts.fact3.number">-10 Jahre</div>
                                <div class="shocking-label" data-i18n="sos.shockingFacts.fact3.label">Lebenserwartung</div>
                                <div class="shocking-detail" data-i18n="sos.shockingFacts.fact3.detail">Raucher sterben im Schnitt 10 Jahre frÃ¼her</div>
                            </div>
                        </div>

                        <!-- Fact 4 -->
                        <div class="shocking-fact">
                            <div class="shocking-icon">ğŸ«</div>
                            <div class="shocking-content">
                                <div class="shocking-number" data-i18n="sos.shockingFacts.fact4.number">90%</div>
                                <div class="shocking-label" data-i18n="sos.shockingFacts.fact4.label">Lungenkrebs durch Rauchen</div>
                                <div class="shocking-detail" data-i18n="sos.shockingFacts.fact4.detail">7x hÃ¶heres Risiko als Nichtraucher</div>
                            </div>
                        </div>

                        <!-- Fact 5 -->
                        <div class="shocking-fact">
                            <div class="shocking-icon">ğŸ«€</div>
                            <div class="shocking-content">
                                <div class="shocking-number" data-i18n="sos.shockingFacts.fact5.number">3x</div>
                                <div class="shocking-label" data-i18n="sos.shockingFacts.fact5.label">Herzinfarktrisiko</div>
                                <div class="shocking-detail" data-i18n="sos.shockingFacts.fact5.detail">Schlaganfallrisiko 2-3x hÃ¶her</div>
                            </div>
                        </div>

                        <!-- Fact 6 -->
                        <div class="shocking-fact">
                            <div class="shocking-icon">ğŸ¦ </div>
                            <div class="shocking-content">
                                <div class="shocking-number" data-i18n="sos.shockingFacts.fact6.number">88.000</div>
                                <div class="shocking-label" data-i18n="sos.shockingFacts.fact6.label">Neue KrebsfÃ¤lle/Jahr (DE)</div>
                                <div class="shocking-detail" data-i18n="sos.shockingFacts.fact6.detail">Nur durch Rauchen verursacht</div>
                            </div>
                        </div>

                        <!-- Fact 7 -->
                        <div class="shocking-fact">
                            <div class="shocking-icon">ğŸ’¨</div>
                            <div class="shocking-content">
                                <div class="shocking-number" data-i18n="sos.shockingFacts.fact7.number">90%</div>
                                <div class="shocking-label" data-i18n="sos.shockingFacts.fact7.label">COPD-Patienten</div>
                                <div class="shocking-detail" data-i18n="sos.shockingFacts.fact7.detail">Sind oder waren Raucher</div>
                            </div>
                        </div>

                        <!-- Fact 8 -->
                        <div class="shocking-fact">
                            <div class="shocking-icon">â±ï¸</div>
                            <div class="shocking-content">
                                <div class="shocking-number" data-i18n="sos.shockingFacts.fact8.number">17-22 Min</div>
                                <div class="shocking-label" data-i18n="sos.shockingFacts.fact8.label">Lebenszeit pro Zigarette</div>
                                <div class="shocking-detail" data-i18n="sos.shockingFacts.fact8.detail">Jede Zigarette verkÃ¼rzt dein Leben (Jackson 2025)</div>
                            </div>
                        </div>

                        <!-- Fact 9 -->
                        <div class="shocking-fact">
                            <div class="shocking-icon">ğŸ¦µ</div>
                            <div class="shocking-content">
                                <div class="shocking-number" data-i18n="sos.shockingFacts.fact9.number">Raucherbein</div>
                                <div class="shocking-label" data-i18n="sos.shockingFacts.fact9.label">Amputation droht</div>
                                <div class="shocking-detail" data-i18n="sos.shockingFacts.fact9.detail">DurchblutungsstÃ¶rungen in Beinen</div>
                            </div>
                        </div>

                        <!-- Fact 10 -->
                        <div class="shocking-fact">
                            <div class="shocking-icon">ğŸ‘ï¸</div>
                            <div class="shocking-content">
                                <div class="shocking-number" data-i18n="sos.shockingFacts.fact10.number">Erblindung</div>
                                <div class="shocking-label" data-i18n="sos.shockingFacts.fact10.label">Netzhautdegeneration</div>
                                <div class="shocking-detail" data-i18n="sos.shockingFacts.fact10.detail">Rauchen schÃ¤digt die Augen</div>
                            </div>
                        </div>

                        <!-- Fact 11 -->
                        <div class="shocking-fact">
                            <div class="shocking-icon">ğŸ¼</div>
                            <div class="shocking-content">
                                <div class="shocking-number" data-i18n="sos.shockingFacts.fact11.number">Unfruchtbarkeit</div>
                                <div class="shocking-label" data-i18n="sos.shockingFacts.fact11.label">PotenzstÃ¶rungen</div>
                                <div class="shocking-detail" data-i18n="sos.shockingFacts.fact11.detail">Schlechte SpermienqualitÃ¤t</div>
                            </div>
                        </div>

                        <!-- Fact 12 -->
                        <div class="shocking-fact">
                            <div class="shocking-icon">ğŸ¦·</div>
                            <div class="shocking-content">
                                <div class="shocking-number" data-i18n="sos.shockingFacts.fact12.number">Zahnverlust</div>
                                <div class="shocking-label" data-i18n="sos.shockingFacts.fact12.label">Zahnfleischerkrankungen</div>
                                <div class="shocking-detail" data-i18n="sos.shockingFacts.fact12.detail">2x hÃ¶heres Risiko fÃ¼r Zahnausfall</div>
                            </div>
                        </div>
                    </div>

                    <div class="shocking-reminder" data-i18n-html="sos.shockingFacts.reminder">
                        <strong>Du hast RICHTIG entschieden!</strong> Mit jedem rauchfreien Tag rettest du dein Leben.
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="app-footer">
            <div class="footer-links">
                <a href="info.html" data-i18n="footer.about">Ãœber ByeByeSmoke</a>
                <a href="quellen.html" data-i18n="footer.sources">Quellen</a>
                <a href="datenschutz.html" data-i18n="footer.privacy">Datenschutz</a>
                <a href="impressum.html" data-i18n="footer.imprint">Impressum</a>
                <a href="https://github.com/HamiedNabizada/smoke-free-tracker" target="_blank">GitHub</a>
            </div>
            <div class="footer-disclaimer" data-i18n="footer.disclaimer">
                âš ï¸ ByeByeSmoke ist kein medizinisches GerÃ¤t. Bei gesundheitlichen Fragen konsultiere einen Arzt.
            </div>
        </footer>
    </div>

    <!-- SOS Hub Overlay -->
    <div id="cravingOverlay" class="craving-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="cravingTimerTitle">
        <div class="craving-overlay-content">
            <!-- Close Button -->
            <button id="cravingCloseBtn" class="craving-close-btn" data-i18n-aria="sos.overlay.close" aria-label="SchlieÃŸen">âœ•</button>
            <h2 id="cravingTimerTitle" class="sr-only" data-i18n="sos.overlay.title">SOS Hilfe</h2>

            <!-- Timer Header (always visible) -->
            <div class="sos-timer-header">
                <div class="breathing-container-compact">
                    <div class="breathing-circle"></div>
                    <div class="breathing-text" id="breathingText"></div>
                </div>
                <div class="timer-compact">
                    <div class="timer-display" id="timerDisplay">5:00</div>
                    <div class="timer-label" data-i18n="sos.overlay.remaining">verbleibend</div>
                </div>
            </div>

            <!-- Count Option -->
            <div class="craving-count-option">
                <label class="craving-checkbox-label">
                    <input type="checkbox" id="countCravingCheckbox" checked>
                    <span class="checkbox-text" data-i18n="sos.overlay.countAsCraving">Als Verlangen zÃ¤hlen</span>
                </label>
            </div>

            <!-- Content Tabs -->
            <div class="sos-tabs">
                <button class="sos-tab active" data-content="tips" data-i18n="sos.overlay.tabs.tips">ğŸ’¡ Tipps</button>
                <button class="sos-tab" data-content="breathing" data-i18n="sos.overlay.tabs.breathing">ğŸ§˜ Atmen</button>
                <button class="sos-tab" data-content="games" data-i18n="sos.overlay.tabs.games">ğŸ® Spiele</button>
            </div>

            <!-- Content Areas -->
            <div class="sos-content">
                <!-- Tips Content (default) -->
                <div class="sos-content-area" id="sosContentTips">
                    <div class="craving-tip-display" id="cravingTipDisplay">
                        <div class="tip-icon-large">ğŸ’ª</div>
                        <div class="tip-text" id="cravingTipText">Atme tief ein und aus. Du schaffst das!</div>
                    </div>
                </div>

                <!-- Breathing Content -->
                <div class="sos-content-area hidden" id="sosContentBreathing">
                    <div class="sos-breathing-options">
                        <button class="sos-breathing-btn" id="startBoxBreathing">
                            <span class="exercise-icon">â—»ï¸</span>
                            <span class="exercise-info">
                                <span class="exercise-name" data-i18n="sos.breathing.box.name">Box Breathing</span>
                                <span class="exercise-detail" data-i18n="sos.breathing.box.detail">4-4-4-4 | ~2 Min | Fokus</span>
                            </span>
                        </button>
                        <button class="sos-breathing-btn" id="start478Breathing">
                            <span class="exercise-icon">ğŸŒ™</span>
                            <span class="exercise-info">
                                <span class="exercise-name" data-i18n="sos.breathing.478.name">4-7-8 Technik</span>
                                <span class="exercise-detail" data-i18n="sos.breathing.478.detail">4-7-8 | ~2.5 Min | Entspannung</span>
                            </span>
                        </button>
                    </div>
                    <!-- Active breathing exercise container -->
                    <div class="sos-breathing-active hidden" id="sosBreathingActive">
                        <div class="breathing-exercise-display">
                            <div class="breathing-exercise-circle"></div>
                            <div class="breathing-instruction" id="sosBreathingInstruction">Einatmen</div>
                            <div class="breathing-phase-timer" id="sosBreathingTimer">4</div>
                        </div>
                        <div class="breathing-progress" id="sosBreathingProgress">Zyklus 1 von 4</div>
                        <button class="breathing-stop-btn" id="sosBreathingStop" data-i18n="sos.breathing.stop">Ãœbung beenden</button>
                    </div>
                </div>

                <!-- Games Content -->
                <div class="sos-content-area hidden" id="sosContentGames">
                    <div class="sos-games-list" id="sosGamesList">
                        <!-- Games will be populated by JS -->
                    </div>
                    <!-- Active game container -->
                    <div class="sos-game-active hidden" id="sosGameActive">
                        <!-- Game will be rendered here -->
                    </div>
                </div>
            </div>

            <!-- Success Message (hidden initially) -->
            <div class="craving-success hidden" id="cravingSuccess">
                <div class="success-icon">ğŸ‰</div>
                <h2 data-i18n="sos.success.title">Geschafft!</h2>
                <p data-i18n="sos.success.message">Du hast das Verlangen Ã¼berwunden!</p>
                <div class="success-stats" id="successStats"></div>
                <button class="success-close-btn" id="successCloseBtn" data-i18n="common.close">SchlieÃŸen</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="settings-modal hidden" role="dialog" aria-modal="true" aria-labelledby="settingsModalTitle">
        <div class="settings-modal-content">
            <button id="settingsCloseBtn" class="settings-close-btn" data-i18n-aria="settings.close" aria-label="Einstellungen schlieÃŸen">âœ•</button>
            <h2 id="settingsModalTitle" data-i18n="settings.title">âš™ï¸ Einstellungen</h2>

            <div class="settings-section">
                <h3 data-i18n="settings.account.title">Account</h3>
                <p class="settings-username"><span data-i18n="settings.account.loggedInAs">Eingeloggt als:</span> <strong id="usernameDisplay">-</strong></p>
            </div>

            <div class="settings-section">
                <h3 data-i18n="settings.data.title">ğŸ“Š Meine Daten bearbeiten</h3>
                <form id="settingsDataForm">
                    <div class="form-group">
                        <label for="settingsQuitDate" data-i18n="settings.data.quitDate">Rauchstopp-Datum & Uhrzeit</label>
                        <input type="datetime-local" id="settingsQuitDate" name="quit_date" required>
                    </div>

                    <div class="form-group">
                        <label for="settingsCigarettesPerDay" data-i18n="settings.data.cigarettesPerDay">Zigaretten pro Tag (vorher)</label>
                        <input type="number" id="settingsCigarettesPerDay" name="cigarettes_per_day" min="1" max="200" required>
                    </div>

                    <div class="form-group">
                        <label for="settingsPricePerPack" data-i18n="settings.data.pricePerPack">Preis pro Packung (â‚¬)</label>
                        <input type="number" step="0.01" id="settingsPricePerPack" name="price_per_pack" min="0" required>
                    </div>

                    <div class="form-group">
                        <label for="settingsCigarettesPerPack" data-i18n="settings.data.cigarettesPerPack">Zigaretten pro Packung</label>
                        <input type="number" id="settingsCigarettesPerPack" name="cigarettes_per_pack" min="1" required>
                    </div>

                    <button type="submit" class="save-settings-btn" data-i18n="settings.data.save">Speichern</button>
                </form>
            </div>

            <div class="settings-section">
                <h3 data-i18n="settings.notifications.title">ğŸ”” Benachrichtigungen</h3>
                <p class="settings-description" data-i18n="settings.notifications.description">Erhalte motivierende Push-Benachrichtigungen, wenn du wichtige Meilensteine erreichst.</p>

                <div class="notification-settings">
                    <div class="notification-option">
                        <div class="notification-info">
                            <div class="notification-label" data-i18n="settings.notifications.push.label">Push-Benachrichtigungen aktivieren</div>
                            <div class="notification-description" data-i18n="settings.notifications.push.description">Erlaube der App, dir Benachrichtigungen zu senden</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="notificationsEnabled">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <div class="notification-option" id="milestoneNotificationOption">
                        <div class="notification-info">
                            <div class="notification-label" data-i18n="settings.notifications.milestones.label">Meilenstein-Benachrichtigungen</div>
                            <div class="notification-description" data-i18n="settings.notifications.milestones.description">Erhalte eine Benachrichtigung, wenn du einen Gesundheitsmeilenstein erreichst</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="milestonesEnabled" disabled>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <div class="notification-option" id="dailyMotivationOption">
                        <div class="notification-info">
                            <div class="notification-label" data-i18n="settings.notifications.daily.label">TÃ¤gliche Motivation</div>
                            <div class="notification-description" data-i18n="settings.notifications.daily.description">Erhalte einmal tÃ¤glich eine motivierende Nachricht (10:00 Uhr)</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="dailyMotivationEnabled" disabled>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <h3 data-i18n="settings.export.title">ğŸ“¦ Deine Daten</h3>
                <p class="settings-description" data-i18n="settings.export.description">Exportiere deine Daten oder teile deine Erfolge.</p>

                <div class="data-actions">
                    <button id="exportDataBtn" class="data-action-btn export-btn">
                        <span class="btn-icon">ğŸ“¥</span>
                        <div class="btn-content">
                            <div class="btn-title" data-i18n="settings.export.exportData.title">Daten exportieren</div>
                            <div class="btn-description" data-i18n="settings.export.exportData.description">Lade alle deine Daten als JSON-Datei herunter</div>
                        </div>
                    </button>

                    <button id="shareSuccessBtn" class="data-action-btn share-btn">
                        <span class="btn-icon">ğŸ“¤</span>
                        <div class="btn-content">
                            <div class="btn-title" data-i18n="settings.export.shareSuccess.title">Erfolg teilen</div>
                            <div class="btn-description" data-i18n="settings.export.shareSuccess.description">Teile deine rauchfreie Zeit mit anderen</div>
                        </div>
                    </button>

                    <button id="generateBadgeBtn" class="data-action-btn badge-btn">
                        <span class="btn-icon">ğŸ†</span>
                        <div class="btn-content">
                            <div class="btn-title" data-i18n="settings.export.badge.title">Erfolgs-Badge erstellen</div>
                            <div class="btn-description" data-i18n="settings.export.badge.description">Erstelle ein Badge mit deinen Statistiken</div>
                        </div>
                    </button>

                    <button id="shareImageBtn" class="data-action-btn image-btn">
                        <span class="btn-icon">ğŸ“¸</span>
                        <div class="btn-content">
                            <div class="btn-title" data-i18n="settings.export.shareImage.title">Als Bild teilen</div>
                            <div class="btn-description" data-i18n="settings.export.shareImage.description">Erstelle ein Bild fÃ¼r Instagram, WhatsApp & Co.</div>
                        </div>
                    </button>

                    <button id="exportPdfBtn" class="data-action-btn pdf-btn">
                        <span class="btn-icon">ğŸ“„</span>
                        <div class="btn-content">
                            <div class="btn-title" data-i18n="settings.export.pdf.title">PDF-Report erstellen</div>
                            <div class="btn-description" data-i18n="settings.export.pdf.description">Exportiere deine Statistiken als PDF-Dokument</div>
                        </div>
                    </button>
                </div>
            </div>

            <div class="settings-section danger-zone">
                <h3 data-i18n="settings.danger.title">âš ï¸ Gefahrenzone</h3>
                <p class="danger-warning" data-i18n="settings.danger.warning">Diese Aktion kann nicht rÃ¼ckgÃ¤ngig gemacht werden!</p>
                <button id="deleteAccountBtn" class="delete-account-btn" data-i18n="settings.danger.deleteAccount">Account lÃ¶schen</button>
            </div>
        </div>
    </div>

    <!-- Tutorial Modal -->
    <div id="tutorialModal" class="tutorial-modal hidden" role="dialog" aria-modal="true" aria-labelledby="tutorialTitle">
        <div class="tutorial-modal-content">
            <button id="tutorialCloseBtn" class="tutorial-close-btn" data-i18n-aria="tutorial.close" aria-label="Tutorial schlieÃŸen">âœ•</button>
            <h2 id="tutorialTitle" class="sr-only" data-i18n="tutorial.srTitle">Tutorial</h2>

            <div class="tutorial-slides">
                <!-- Slide 1: Willkommen -->
                <div class="tutorial-slide active" data-slide="1">
                    <div class="tutorial-icon">ğŸ‘‹</div>
                    <h2 data-i18n="tutorial.slide1.title">Willkommen bei ByeByeSmoke!</h2>
                    <p data-i18n="tutorial.slide1.text">Lass uns dir die wichtigsten Features zeigen und wie du die App als PWA installieren kannst.</p>
                    <ul class="tutorial-features">
                        <li data-i18n="tutorial.slide1.feature1">ğŸ“Š Verfolge deinen Fortschritt</li>
                        <li data-i18n="tutorial.slide1.feature2">ğŸ¥ Gesundheitsmeilensteine</li>
                        <li data-i18n="tutorial.slide1.feature3">ğŸ†˜ Hilfe bei Verlangen</li>
                        <li data-i18n="tutorial.slide1.feature4">ğŸ”” Push-Benachrichtigungen</li>
                        <li data-i18n="tutorial.slide1.feature5">ğŸ“± Als App installieren</li>
                    </ul>
                </div>

                <!-- Slide 2: Hauptfunktionen -->
                <div class="tutorial-slide" data-slide="2">
                    <div class="tutorial-icon">ğŸ“Š</div>
                    <h2 data-i18n="tutorial.slide2.title">Die wichtigsten Features</h2>
                    <div class="tutorial-feature-list">
                        <div class="tutorial-feature-item">
                            <div class="feature-icon">ğŸ“ˆ</div>
                            <div class="feature-content">
                                <h3 data-i18n="tutorial.slide2.stats.title">Statistiken</h3>
                                <p data-i18n="tutorial.slide2.stats.text">Sieh wie viel Geld du gespart hast und wie sich deine Gesundheit verbessert.</p>
                            </div>
                        </div>
                        <div class="tutorial-feature-item">
                            <div class="feature-icon">ğŸ¥</div>
                            <div class="feature-content">
                                <h3 data-i18n="tutorial.slide2.milestones.title">Meilensteine</h3>
                                <p data-i18n="tutorial.slide2.milestones.text">28 Gesundheitsmeilensteine zeigen dir, wie sich dein KÃ¶rper regeneriert.</p>
                            </div>
                        </div>
                        <div class="tutorial-feature-item">
                            <div class="feature-icon">ğŸ†˜</div>
                            <div class="feature-content">
                                <h3 data-i18n="tutorial.slide2.craving.title">Craving-Timer</h3>
                                <p data-i18n="tutorial.slide2.craving.text">5-Minuten-Timer mit AtemÃ¼bungen hilft dir, Verlangen zu Ã¼berwinden.</p>
                            </div>
                        </div>
                        <div class="tutorial-feature-item">
                            <div class="feature-icon">ğŸ””</div>
                            <div class="feature-content">
                                <h3 data-i18n="tutorial.slide2.notifications.title">Benachrichtigungen</h3>
                                <p data-i18n="tutorial.slide2.notifications.text">Aktiviere Push-Benachrichtigungen in den Einstellungen fÃ¼r Meilensteine und tÃ¤gliche Motivation.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slide 3: Android Installation -->
                <div class="tutorial-slide" data-slide="3">
                    <div class="tutorial-icon">ğŸ¤–</div>
                    <h2 data-i18n="tutorial.slide3.title">Installation auf Android</h2>
                    <div class="install-steps">
                        <div class="install-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h3 data-i18n="tutorial.slide3.step1.title">Chrome-MenÃ¼ Ã¶ffnen</h3>
                                <p data-i18n="tutorial.slide3.step1.text">Tippe auf die drei Punkte (â‹®) oben rechts im Browser.</p>
                            </div>
                        </div>
                        <div class="install-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h3 data-i18n="tutorial.slide3.step2.title">"App installieren" wÃ¤hlen</h3>
                                <p data-i18n="tutorial.slide3.step2.text">Tippe auf "App installieren" oder "Zum Startbildschirm hinzufÃ¼gen".</p>
                            </div>
                        </div>
                        <div class="install-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h3 data-i18n="tutorial.slide3.step3.title">BestÃ¤tigen</h3>
                                <p data-i18n="tutorial.slide3.step3.text">BestÃ¤tige die Installation. Die App erscheint nun auf deinem Homescreen!</p>
                            </div>
                        </div>
                    </div>
                    <div class="install-note" data-i18n="tutorial.slide3.note">
                        ğŸ’¡ Die App funktioniert dann wie eine normale App und kann auch offline genutzt werden.
                    </div>
                </div>

                <!-- Slide 4: iOS Installation -->
                <div class="tutorial-slide" data-slide="4">
                    <div class="tutorial-icon">ğŸ</div>
                    <h2 data-i18n="tutorial.slide4.title">Installation auf iOS (iPhone/iPad)</h2>
                    <div class="install-steps">
                        <div class="install-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h3 data-i18n="tutorial.slide4.step1.title">Safari Ã¶ffnen</h3>
                                <p data-i18n="tutorial.slide4.step1.text">Ã–ffne diese Seite in Safari (nicht Chrome oder andere Browser!).</p>
                            </div>
                        </div>
                        <div class="install-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h3 data-i18n="tutorial.slide4.step2.title">Teilen-Button tippen</h3>
                                <p data-i18n="tutorial.slide4.step2.text">Tippe unten auf das Teilen-Symbol (â–¡â†‘).</p>
                            </div>
                        </div>
                        <div class="install-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h3 data-i18n="tutorial.slide4.step3.title">"Zum Home-Bildschirm"</h3>
                                <p data-i18n="tutorial.slide4.step3.text">Scrolle runter und wÃ¤hle "Zum Home-Bildschirm".</p>
                            </div>
                        </div>
                        <div class="install-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h3 data-i18n="tutorial.slide4.step4.title">HinzufÃ¼gen bestÃ¤tigen</h3>
                                <p data-i18n="tutorial.slide4.step4.text">Tippe oben rechts auf "HinzufÃ¼gen". Fertig!</p>
                            </div>
                        </div>
                    </div>
                    <div class="install-note install-note-warning" data-i18n="tutorial.slide4.warning">
                        âš ï¸ Wichtig: Die Installation funktioniert nur in Safari, nicht in Chrome oder anderen Browsern!
                    </div>
                </div>

                <!-- Slide 5: Fertig -->
                <div class="tutorial-slide" data-slide="5">
                    <div class="tutorial-icon">ğŸ‰</div>
                    <h2 data-i18n="tutorial.slide5.title">Alles klar!</h2>
                    <p data-i18n="tutorial.slide5.text">Du kennst jetzt die wichtigsten Features und weiÃŸt, wie du die App installieren kannst.</p>
                    <div class="tutorial-final-tips">
                        <h3 data-i18n="tutorial.slide5.tipsTitle">Noch ein paar Tipps:</h3>
                        <ul>
                            <li data-i18n="tutorial.slide5.tip1">ğŸŒ™ Nutze den Dark Mode fÃ¼r bessere Lesbarkeit nachts</li>
                            <li data-i18n="tutorial.slide5.tip2">âš™ï¸ Passe deine Daten in den Einstellungen an</li>
                            <li data-i18n="tutorial.slide5.tip3">ğŸ”” Aktiviere Benachrichtigungen fÃ¼r Extra-Motivation</li>
                            <li data-i18n="tutorial.slide5.tip4">ğŸ“Š Schau dir regelmÃ¤ÃŸig deine Erfolge an!</li>
                        </ul>
                    </div>
                    <p class="tutorial-final-message" data-i18n="tutorial.slide5.finalMessage">Viel Erfolg auf deinem Weg! ğŸ’ª</p>
                </div>
            </div>

            <div class="tutorial-navigation">
                <button id="tutorialPrevBtn" class="tutorial-nav-btn" disabled data-i18n="tutorial.nav.prev">â† ZurÃ¼ck</button>
                <div class="tutorial-dots" id="tutorialDots">
                    <span class="tutorial-dot active" data-slide="1"></span>
                    <span class="tutorial-dot" data-slide="2"></span>
                    <span class="tutorial-dot" data-slide="3"></span>
                    <span class="tutorial-dot" data-slide="4"></span>
                    <span class="tutorial-dot" data-slide="5"></span>
                </div>
                <button id="tutorialNextBtn" class="tutorial-nav-btn" data-i18n="tutorial.nav.next">Weiter â†’</button>
            </div>
        </div>
    </div>

    <!-- Breathing Exercise Overlay -->
    <div id="breathingExerciseOverlay" class="breathing-exercise-overlay hidden" role="dialog" aria-modal="true">
        <div class="breathing-exercise-content">
            <button id="breathingExerciseCloseBtn" class="breathing-exercise-close-btn" data-i18n-aria="sos.breathing.closeExercise" aria-label="Ãœbung beenden">âœ•</button>

            <h2 id="breathingExerciseTitle" class="breathing-exercise-title" data-i18n="sos.breathing.exerciseTitle">AtemÃ¼bung</h2>

            <div class="breathing-exercise-visual">
                <div class="breathing-exercise-circle"></div>
                <div class="breathing-exercise-inner">
                    <div id="breathingInstruction" class="breathing-instruction">Bereit</div>
                    <div id="breathingPhaseTimer" class="breathing-phase-timer"></div>
                </div>
            </div>

            <div id="breathingCycleProgress" class="breathing-cycle-progress">Bereit zum Start</div>
        </div>
    </div>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- jsPDF for PDF export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- Main App (imports Firebase modules) -->
    <script type="module" src="js/app.js"></script>
</body>
</html>
